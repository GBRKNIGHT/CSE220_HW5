#include <stdlib.h>
#include "wolfpack.h"

int main() {
    char *packets[] = {
        "\x00\x98\x21\x4f\xce\x00\x55\xac\xda\xbf\x20\x40\x00\x00\x36\x00\x92\x00\x00\x2a\xed\xce\x2b\xdf\x69\x66\x66\x65\x72\x65\x6e\x74\x20\x70\x65\x72\x73\x6f\x6e\x20\x74\x68",        
        "\x00\x98\x21\x4f\xce\x00\x55\xac\xda\xbf\x20\x40\x00\x00\x00\x00\x92\x00\x00\x2a\xed\xce\x2b\xa9\x49\x74\x27\x73\x20\x6e\x6f\x20\x75\x73\x65\x20\x67\x6f\x69\x6e\x67\x20",
        "\x00\x98\x21\x4f\xce\x00\x55\xac\xda\xbf\x20\x40\x00\x00\x48\x00\x92\x00\x00\x2a\xed\xce\x2b\xf1\x65\x6e\x2e\x20\x2a\x4c\x65\x77\x69\x73\x20\x43\x61\x72\x72\x6f\x6c\x6c",
        "\x00\x98\x21\x4f\xce\x00\x55\xac\xda\xbf\x20\x40\x00\x00\x5a\x00\x92\x00\x00\x19\xed\xce\x2b\xf2\x2a",
        "\x00\x98\x21\x4f\xce\x00\x55\xac\xda\xbf\x20\x40\x00\x00\x12\x00\x92\x00\x00\x2a\xed\xce\x2b\xbb\x62\x61\x63\x6b\x20\x74\x6f\x20\x79\x65\x73\x74\x65\x72\x64\x61\x79\x2c",
        "\x00\x98\x21\x4f\xce\x00\x55\xac\xda\xbf\x20\x40\x00\x00\x24\x00\x92\x00\x00\x2a\xed\xce\x2b\xcd\x20\x62\x65\x63\x61\x75\x73\x65\x20\x49\x20\x77\x61\x73\x20\x61\x20\x64",
    };
    unsigned int packets_len = 6;
    unsigned int message_len = 85;  // original message has 91 characters. 
    char *message_act = malloc(message_len+3);

    // fill memory with "random" garbage
    srand(23456);
    for (unsigned int i = 0; i < message_len+3; i++)
        message_act[i] = (char)(rand() % 90 + 35);
        
    reconstruct_sf((unsigned char **)packets, packets_len, message_act, message_len);
    free(message_act);
    return 0;
}